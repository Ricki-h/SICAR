<script setup>
import { ref, onMounted } from 'vue'
import { useAuthStore } from '../stores/auth'
import { RouterLink } from 'vue-router'
import Loading from '../components/ui/Loading.vue'
import TheFooter from '../components/ui/TheFooter.vue'
import TheHeader from '../components/ui/TheHeader.vue'

const auth = useAuthStore()

const loading = ref(false)
const preview = ref(null)

onMounted(async () => {
  await auth.fetchUser()
})

</script>

<template>
    <TheHeader class="mb-15"/>
    <main v-if="auth.user" class="ui-container-xl px-6 sm:px-12 lg:px-28 mx-auto flex flex-col gap-15 mb-25">
        <div class="flex flex-col gap-14">
          <div class="flex flex-col lg:flex-row lg:justify-between gap-8">
            <div class="lg:max-w-125 flex flex-col gap-8 w-full items-center text-center lg:items-start lg:text-left">
              <div class="flex items-center gap-8 flex-col lg:flex-row">
                <div class="max-w-45 w-full p-2 border-6 border-blue-600 overflow-clip rounded-full">
                  <img :src="auth.user.icon" alt="" class="w-full object-cover">
                </div>
                <h2 class="text-3xl text-text font-title">Olá, <span class="font-bold text-orange-600">{{ auth.user.nome }}</span></h2>
              </div>
              <p class="font-text text-text text-sm">Gerencie sua conta, acompanhe serviços solicitados e suas oportunidades de emprego</p>
            </div>
            <div class="grid xl:grid-cols-2 grid-cols-1 sm:grid-cols-2 lg:grid-rows-4 xl:grid-rows-2 gap-8 w-full">
              <div class="p-4 bg-bg shadow-md shadow-shadow flex flex-col gap-3 hover:bg-bg-blue hover:cursor-pointer">
                <div class="flex gap-3 items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="22" viewBox="0 0 18 22" fill="currentColor" class="fill-title">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M9 1.77828e-08C8.71334 -3.82072e-05 8.43001 0.0615486 8.16923 0.180587C7.90845 0.299625 7.6763 0.473333 7.48853 0.689937C7.30076 0.906542 7.16174 1.16098 7.0809 1.43601C7.00006 1.71104 6.97929 2.00024 7.02 2.284C5.57037 2.71149 4.29804 3.59668 3.39319 4.80722C2.48835 6.01777 1.9996 7.48865 2 9V17H1C0.734784 17 0.48043 17.1054 0.292893 17.2929C0.105357 17.4804 0 17.7348 0 18C0 18.2652 0.105357 18.5196 0.292893 18.7071C0.48043 18.8946 0.734784 19 1 19H17C17.2652 19 17.5196 18.8946 17.7071 18.7071C17.8946 18.5196 18 18.2652 18 18C18 17.7348 17.8946 17.4804 17.7071 17.2929C17.5196 17.1054 17.2652 17 17 17H16V9C16.0004 7.48865 15.5117 6.01777 14.6068 4.80722C13.702 3.59668 12.4296 2.71149 10.98 2.284C10.9933 2.19067 11 2.096 11 2C11 1.46957 10.7893 0.960859 10.4142 0.585786C10.0391 0.210714 9.53043 1.77828e-08 9 1.77828e-08ZM11 21C11 21.2652 10.8946 21.5196 10.7071 21.7071C10.5196 21.8946 10.2652 22 10 22H8C7.73478 22 7.48043 21.8946 7.29289 21.7071C7.10536 21.5196 7 21.2652 7 21C7 20.7348 7.10536 20.4804 7.29289 20.2929C7.48043 20.1054 7.73478 20 8 20H10C10.2652 20 10.5196 20.1054 10.7071 20.2929C10.8946 20.4804 11 20.7348 11 21Z"/>
                  </svg>
                  <h5 class="font-text font-bold text-title">Notificações</h5>
                </div>
                <p class="text-sm text-text font-text">Ver todas as notificações recebidas</p>
              </div>

              <div class="p-4 bg-bg shadow-md shadow-shadow flex flex-col gap-3 hover:bg-bg-blue hover:cursor-pointer">
                <div class="flex gap-3 items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="22" viewBox="0 0 18 22" fill="currentColor" class="fill-title">
                    <path d="M22 18.3333V19.5556C22 20.2039 21.7425 20.8256 21.284 21.284C20.8256 21.7425 20.2039 22 19.5556 22H2.44444C1.79614 22 1.17438 21.7425 0.715961 21.284C0.257539 20.8256 0 20.2039 0 19.5556V2.44444C0 1.79614 0.257539 1.17438 0.715961 0.715961C1.17438 0.257539 1.79614 0 2.44444 0H19.5556C20.2039 0 20.8256 0.257539 21.284 0.715961C21.7425 1.17438 22 1.79614 22 2.44444V3.66667H11C10.3517 3.66667 9.72994 3.92421 9.27152 4.38263C8.8131 4.84105 8.55556 5.4628 8.55556 6.11111V15.8889C8.55556 16.5372 8.8131 17.1589 9.27152 17.6174C9.72994 18.0758 10.3517 18.3333 11 18.3333M11 15.8889H23.2222V6.11111H11M15.8889 12.8333C15.4027 12.8333 14.9363 12.6402 14.5925 12.2964C14.2487 11.9525 14.0556 11.4862 14.0556 11C14.0556 10.5138 14.2487 10.0475 14.5925 9.70364C14.9363 9.35982 15.4027 9.16667 15.8889 9.16667C16.3751 9.16667 16.8414 9.35982 17.1853 9.70364C17.5291 10.0475 17.7222 10.5138 17.7222 11C17.7222 11.4862 17.5291 11.9525 17.1853 12.2964C16.8414 12.6402 16.3751 12.8333 15.8889 12.8333Z"/>
                  </svg>
                  <h5 class="font-text font-bold text-title">Carteira de documentos</h5>
                </div>
                <p class="text-sm text-text font-text">Ver todos os documentos</p>
              </div>

              <div class="p-4 bg-bg shadow-md shadow-shadow flex flex-col gap-3 hover:bg-bg-blue hover:cursor-pointer">
                <div class="flex gap-3 items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="fill-title">
                    <path d="M23.9926 14C23.992 13.0699 23.7033 12.1628 23.166 11.4035C22.6288 10.6442 21.8695 10.07 20.9926 9.76V9C20.9926 6.61305 20.0443 4.32387 18.3565 2.63604C16.6687 0.948211 14.3795 0 11.9926 0C9.6056 0 7.31642 0.948211 5.62859 2.63604C3.94076 4.32387 2.99255 6.61305 2.99255 9V9.76C2.11701 10.0713 1.35931 10.646 0.823486 11.4052C0.287663 12.1643 0 13.0708 0 14C0 14.9292 0.287663 15.8357 0.823486 16.5948C1.35931 17.354 2.11701 17.9287 2.99255 18.24C3.21915 18.3188 3.46102 18.3435 3.69887 18.3123C3.93673 18.281 4.164 18.1946 4.36255 18.06C4.5567 17.9188 4.71489 17.7339 4.82434 17.5202C4.93378 17.3065 4.99141 17.0701 4.99255 16.83V9C4.99255 7.14348 5.73005 5.36301 7.0428 4.05025C8.35556 2.7375 10.136 2 11.9926 2C13.8491 2 15.6295 2.7375 16.9423 4.05025C18.2551 5.36301 18.9926 7.14348 18.9926 9V16.83C18.9951 17.038 19.0408 17.2432 19.1269 17.4326C19.213 17.6219 19.3375 17.7913 19.4926 17.93V18.5C19.4926 19.98 18.2026 20.5 16.9926 20.5H15.2126C15.0368 20.1955 14.7838 19.9428 14.4792 19.7672C14.1746 19.5917 13.8291 19.4995 13.4775 19.5C13.1259 19.5006 12.7807 19.5938 12.4766 19.7703C12.1725 19.9467 11.9203 20.2003 11.7455 20.5053C11.5706 20.8103 11.4792 21.156 11.4805 21.5076C11.4819 21.8591 11.5758 22.2042 11.753 22.5078C11.9302 22.8115 12.1843 23.0631 12.4897 23.2373C12.7951 23.4115 13.141 23.5021 13.4926 23.5C13.8416 23.4979 14.184 23.4045 14.4857 23.2291C14.7875 23.0536 15.038 22.8023 15.2126 22.5H16.9926C19.6426 22.5 21.4926 20.86 21.4926 18.5V18C22.2386 17.6299 22.8673 17.06 23.3087 16.3538C23.75 15.6476 23.9868 14.8328 23.9926 14Z"/>
                    <path d="M10.7426 16.75C10.7426 17.0815 10.8742 17.3995 11.1087 17.6339C11.3431 17.8683 11.661 18 11.9926 18C12.3241 18 12.642 17.8683 12.8764 17.6339C13.1109 17.3995 13.2426 17.0815 13.2426 16.75C13.2426 16.4185 13.1109 16.1005 12.8764 15.8661C12.642 15.6317 12.3241 15.5 11.9926 15.5C11.661 15.5 11.3431 15.6317 11.1087 15.8661C10.8742 16.1005 10.7426 16.4185 10.7426 16.75ZM9.49255 10.5C9.82407 10.5 10.142 10.3683 10.3764 10.1339C10.6109 9.89946 10.7426 9.58152 10.7426 9.25C10.7433 9.02482 10.8049 8.80404 10.9208 8.61098C11.0367 8.41792 11.2026 8.25975 11.401 8.15319C11.5994 8.04663 11.8228 7.99563 12.0478 8.00558C12.2727 8.01553 12.4908 8.08607 12.679 8.20973C12.8672 8.33339 13.0185 8.50559 13.1169 8.70813C13.2153 8.91067 13.2571 9.13603 13.238 9.36039C13.2189 9.58476 13.1396 9.7998 13.0084 9.98279C12.8771 10.1658 12.6989 10.3099 12.4926 10.4C11.9724 10.6261 11.5296 10.9992 11.2187 11.4736C10.9078 11.948 10.7423 12.5028 10.7426 13.07V13.63C10.7426 13.9615 10.8742 14.2795 11.1087 14.5139C11.3431 14.7483 11.661 14.88 11.9926 14.88C12.3241 14.88 12.642 14.7483 12.8764 14.5139C13.1109 14.2795 13.2426 13.9615 13.2426 13.63V13.07C13.2433 12.9893 13.2673 12.9106 13.3117 12.8432C13.356 12.7758 13.4188 12.7226 13.4926 12.69C14.1121 12.4196 14.647 11.9868 15.0407 11.4374C15.4345 10.8879 15.6724 10.2422 15.7292 9.56869C15.7861 8.89513 15.6599 8.21872 15.3639 7.61101C15.0679 7.00331 14.6132 6.4869 14.0478 6.11643C13.4824 5.74597 12.8274 5.53521 12.152 5.50646C11.4767 5.47771 10.8061 5.63204 10.2113 5.95312C9.61647 6.2742 9.11948 6.75009 8.77292 7.33045C8.42636 7.9108 8.2431 8.57404 8.24255 9.25C8.24255 9.58152 8.37425 9.89946 8.60867 10.1339C8.84309 10.3683 9.16103 10.5 9.49255 10.5Z"/>
                  </svg>
                  <h5 class="font-text font-bold text-title">Minhas denúncias</h5>
                </div>
                <p class="text-sm text-text font-text">Acessar denúncias feitas</p>
              </div>
              <div class="p-4 bg-bg shadow-md shadow-shadow flex flex-col gap-3 hover:bg-bg-blue hover:cursor-pointer">
                <div class="flex gap-3 items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="17" viewBox="0 0 22 17" fill="currentColor" class="fill-title">
                    <path d="M14 0V2H12V3.05C17.053 3.551 21 7.815 21 13H1C1 7.815 4.947 3.551 10 3.05V2H8V0H14ZM22 17V15H0V17H22Z"/>
                  </svg>
                  <h5 class="font-text font-bold text-title">Minhas denúncias</h5>
                </div>
                <p class="text-sm text-text font-text">Acessar denúncias feitas</p>
              </div>
            </div>
          </div>

          <hr class="w-full border-clarinho">

          <div class="flex justify-evenly flex-wrap gap-4">
            <RouterLink to="/perfil/dados" class="flex items-center justify-center flex-col gap-4 p-6 bg-bg-blue sm:max-w-62 w-full rounded-md hover:bg-clarinho hover:cursor-pointer">
              <div class="flex flex-col gap-3 items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="72" height="84" viewBox="0 0 72 84" fill="currentColor" class="fill-text">
                  <path d="M54.8907 46.8C53.2339 46.8 51.8907 48.1431 51.8907 49.8C51.8907 51.4569 53.2339 52.8 54.8907 52.8V49.8V46.8ZM56.2207 49.8L56.2215 46.8H56.2207V49.8ZM67.4644 60.0492L64.4862 60.4097L64.4862 60.4103L67.4644 60.0492ZM68.9417 72.2328L71.9199 71.8722L71.9199 71.8717L68.9417 72.2328ZM67.1079 78.3628L64.8282 76.4127L67.1079 78.3628ZM61.4421 81L61.4427 78H61.4421V81ZM10.5579 81V78H10.5573L10.5579 81ZM3.05832 72.2328L6.03657 72.5933L6.03662 72.593L3.05832 72.2328ZM4.5318 60.0492L1.55354 59.6887L1.5535 59.689L4.5318 60.0492ZM15.7831 49.8L15.7819 52.8H15.7831V49.8ZM17.1093 52.8C18.7661 52.8 20.1093 51.4569 20.1093 49.8C20.1093 48.1431 18.7661 46.8 17.1093 46.8V49.8V52.8ZM54.8907 22.5H51.8907C51.8907 31.7032 44.6872 39 36 39V42V45C48.179 45 57.8907 34.8359 57.8907 22.5H54.8907ZM36 42V39C27.3128 39 20.1093 31.7032 20.1093 22.5H17.1093H14.1093C14.1093 34.8359 23.821 45 36 45V42ZM17.1093 22.5H20.1093C20.1093 13.2968 27.3128 6 36 6V3V0C23.821 0 14.1093 10.1641 14.1093 22.5H17.1093ZM36 3V6C44.6872 6 51.8907 13.2968 51.8907 22.5H54.8907H57.8907C57.8907 10.1641 48.179 0 36 0V3ZM54.8907 49.8V52.8H56.2207V49.8V46.8H54.8907V49.8ZM56.2207 49.8L56.2198 52.8C58.2228 52.8006 60.1722 53.5554 61.699 54.9471L63.72 52.73L65.741 50.5129C63.1269 48.1301 59.7428 46.801 56.2215 46.8L56.2207 49.8ZM63.72 52.73L61.699 54.9471C63.2282 56.3411 64.2284 58.2806 64.4862 60.4097L67.4644 60.0492L70.4427 59.6887C70.0154 56.1594 68.3525 52.8935 65.741 50.5129L63.72 52.73ZM67.4644 60.0492L64.4862 60.4103L65.9635 72.5939L68.9417 72.2328L71.9199 71.8717L70.4426 59.6881L67.4644 60.0492ZM68.9417 72.2328L65.9634 72.5933C66.0468 73.2822 65.9871 73.9809 65.7894 74.6416L68.6636 75.5014L71.5377 76.3612C71.9724 74.9082 72.1023 73.3785 71.9199 71.8722L68.9417 72.2328ZM68.6636 75.5014L65.7894 74.6416C65.5919 75.3021 65.2623 75.9052 64.8282 76.4127L67.1079 78.3628L69.3876 80.3129C70.3719 79.1622 71.103 77.8145 71.5377 76.3612L68.6636 75.5014ZM67.1079 78.3628L64.8282 76.4127C64.3942 76.92 63.8666 77.3195 63.2838 77.5907L64.5498 80.3105L65.8158 83.0303C67.1867 82.3922 68.403 81.4639 69.3876 80.3129L67.1079 78.3628ZM64.5498 80.3105L63.2838 77.5907C62.7014 77.8618 62.0742 78.0001 61.4427 78L61.4421 81L61.4414 84C62.953 84.0003 64.4445 83.6686 65.8158 83.0303L64.5498 80.3105ZM61.4421 81V78H10.5579V81V84H61.4421V81ZM10.5579 81L10.5573 78C9.92582 78.0001 9.29856 77.8618 8.71617 77.5907L7.45021 80.3105L6.18425 83.0303C7.55553 83.6686 9.04697 84.0003 10.5586 84L10.5579 81ZM7.45021 80.3105L8.71617 77.5907C8.13345 77.3195 7.60577 76.92 7.17185 76.4127L4.89214 78.3628L2.61243 80.3129C3.59702 81.4639 4.8133 82.3922 6.18425 83.0303L7.45021 80.3105ZM4.89214 78.3628L7.17185 76.4127C6.73769 75.9052 6.40815 75.3021 6.21055 74.6416L3.33641 75.5014L0.46226 76.3612C0.896996 77.8145 1.62807 79.1622 2.61243 80.3129L4.89214 78.3628ZM3.33641 75.5014L6.21055 74.6416C6.01291 73.9809 5.95318 73.2822 6.03657 72.5933L3.05832 72.2328L0.0800629 71.8722C-0.102285 73.3785 0.0275679 74.9082 0.46226 76.3612L3.33641 75.5014ZM3.05832 72.2328L6.03662 72.593L7.5101 60.4094L4.5318 60.0492L1.5535 59.689L0.0800202 71.8726L3.05832 72.2328ZM4.5318 60.0492L7.51005 60.4097C7.76793 58.2796 8.76894 56.3393 10.2993 54.9452L8.27909 52.7274L6.25883 50.5096C3.64524 52.8904 1.98099 56.1578 1.55354 59.6887L4.5318 60.0492ZM8.27909 52.7274L10.2993 54.9452C11.8273 53.5534 13.778 52.7992 15.7819 52.8L15.7831 49.8L15.7843 46.8C12.2614 46.7986 8.87489 48.1266 6.25883 50.5096L8.27909 52.7274ZM15.7831 49.8V52.8H17.1093V49.8V46.8H15.7831V49.8Z"/>
                </svg>
              </div>
              <h4 class="font-title text-orange-600 font-bold text-2xl">Dados Pessoais</h4>
              <p class="text-center text-text font-text">Ver e alterar dados pessoais e de contato</p>
            </RouterLink>
            <div class="flex items-center justify-center flex-col gap-4 p-6 bg-bg-blue sm:max-w-62 w-full rounded-md hover:bg-clarinho hover:cursor-pointer">
              <div class="flex flex-col gap-3 items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="77" height="77" viewBox="0 0 77 77 " fill="none" stroke="currentColor" class="stroke-text">
                  <path d="M69.3 49.8C69.3 57.0696 69.3 60.7044 68.1144 63.567C67.3304 65.4599 66.1812 67.1799 64.7325 68.6286C63.2838 70.0773 61.5638 71.2265 59.6709 72.0105C56.8044 73.2 53.1696 73.2 45.9 73.2H34.2C19.4892 73.2 12.1338 73.2 7.563 68.6292C3 64.0623 3 56.7069 3 42V18.6C3 14.4626 4.64357 10.4947 7.56913 7.56913C10.4947 4.64357 14.4626 3 18.6 3M30.3 24.45L31.9926 39.9291C32.0645 40.5637 32.301 41.1685 32.6786 41.6836C33.0562 42.1987 33.5618 42.6062 34.1454 42.8658C36.8208 44.0163 41.8323 45.9 45.9 45.9C49.9677 45.9 54.9792 44.0163 57.6546 42.8658C58.2389 42.6068 58.7453 42.1995 59.1236 41.6844C59.5019 41.1692 59.739 40.5641 59.8113 39.9291L61.5 24.45M71.25 20.55V35.253M45.9 6.9L18.6 18.6L45.9 30.3L73.2 18.6L45.9 6.9Z"stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <h4 class="font-title text-orange-600 font-bold text-2xl">Meus Cursos</h4>
              <p class="text-center text-text font-text">Acesse os cursos que você se inscreveu</p>
            </div>
            <div class="flex items-center justify-center flex-col gap-4 p-6 bg-bg-blue sm:max-w-62 w-full rounded-md hover:bg-clarinho hover:cursor-pointer">
              <div class="flex flex-col gap-3 items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="92" height="78" viewBox="0 0 92 78" fill="currentColor" class="fill-text">
                  <path d="M78.2 28.9059V4.58824H64.4V16.5176L46 0L0 41.2941H13.8V78H36.8V50.4706H55.2V78H78.2V41.2941H92L78.2 28.9059ZM36.8 32.1176C36.8 27.0706 40.94 22.9412 46 22.9412C51.06 22.9412 55.2 27.0706 55.2 32.1176H36.8Z"/>
                </svg>
              </div>
              <h4 class="font-title text-orange-600 font-bold text-2xl">Auxílios</h4>
              <p class="text-center text-text font-text">Verifique seus auxílios e pedidos</p>
            </div>
            <div class="flex items-center justify-center flex-col gap-4 p-6 bg-bg-blue sm:max-w-62 w-full rounded-md hover:bg-clarinho hover:cursor-pointer">
              <div class="flex flex-col gap-3 items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="62" height="78" viewBox="0 0 62 78" fill="currentColor" class="fill-text">
                  <path d="M31 78C22.0229 75.725 14.6113 70.5406 8.76525 62.4468C2.91917 54.353 -0.00258162 45.3674 1.71157e-06 35.49V11.7L31 0L62 11.7V35.49C62 45.37 59.0783 54.3569 53.2348 62.4507C47.3913 70.5445 39.9797 75.7276 31 78ZM31 69.81C37.2646 67.86 42.4958 64.0081 46.6937 58.2543C50.8917 52.5005 53.3458 46.0824 54.0563 39H31V8.2875L7.75 17.0625V37.245C7.75 37.7 7.81459 38.285 7.94375 39H31V69.81Z"/>
                </svg>
              </div>
              <h4 class="font-title text-orange-600 font-bold text-2xl">Privacidade</h4>
              <p class="text-center text-text font-text">Ver histórico de login e gerenciar autorizações de dados</p>
            </div>
          </div>
        </div>

    </main>
    <div v-else class="justify-center flex items-center w-full py-60 mx-auto">
      <Loading/>
    </div>
    <TheFooter/>
</template>